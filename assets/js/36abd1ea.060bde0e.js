"use strict";(self.webpackChunkcromagnoli_portfolio=self.webpackChunkcromagnoli_portfolio||[]).push([[246],{6385(e,s,i){i.r(s),i.d(s,{assets:()=>x,contentTitle:()=>p,default:()=>f,frontMatter:()=>v,metadata:()=>t,toc:()=>j});const t=JSON.parse('{"id":"case-studies/stateless-configurable-modal","title":"Stateless Configurable Modal","description":"Context","source":"@site/docs/case-studies/stateless-configurable-modal.mdx","sourceDirName":"case-studies","slug":"/case-studies/stateless-configurable-modal","permalink":"/cromagnoli/case-studies/stateless-configurable-modal","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Production Engineering Case Studies","permalink":"/cromagnoli/"},"next":{"title":"Progressive Rollout on Legacy Systems","permalink":"/cromagnoli/case-studies/progressive-rollout"}}');var n=i(4848),a=i(8453),o=i(6540),r={colors:[{colorCode:"BLK",displayName:"Black"},{colorCode:"GRY",displayName:"Graphite"}],sizes:[{size:"S"},{size:"M"},{size:"L"}],availableSkus:[{id:"1",colorCode:"BLK",size:"S",listPrice:"$58",available:!0},{id:"2",colorCode:"BLK",size:"M",listPrice:"$58",available:!0},{id:"3",colorCode:"GRY",size:"M",listPrice:"$58",available:!0}]};function l(e){var s=e.context;return(0,n.jsx)("button",{className:"primaryButton",disabled:!s.isAvailable,children:s.isAvailable?"Update Item":"Unavailable"})}function c(e,s){return s?s(e):(0,n.jsx)(l,{context:e})}var d={BLK:"https://picsum.photos/seed/black/1200/800",GRY:"https://picsum.photos/seed/gray/1200/800"};function u(e){var s=e.variants,i=e.renderPrimaryCta,t=e.deviceType,a=(0,o.useState)(s.colors[0].colorCode),r=a[0],l=a[1],u=(0,o.useState)(s.sizes[0].size),m=u[0],h=u[1],v=function(e,s,i){var t=e.availableSkus.find(function(e){return e.colorCode===s&&e.size===i})||null;return{currentSku:t,isAvailable:!!t}}(s,r,m),p=v.currentSku,x=v.isAvailable,j={selectedColor:r,selectedSize:m,setColor:l,setSize:h,currentSku:p,isAvailable:x,variants:s};return(0,n.jsx)("div",{className:"modalCard "+t,children:(0,n.jsxs)("div",{className:"layout",children:[(0,n.jsx)("div",{className:"imageColumn",children:(0,n.jsx)("img",{src:d[r],alt:"Product preview"})}),(0,n.jsxs)("div",{className:"contentColumn",children:[(0,n.jsxs)("div",{className:"section",children:[(0,n.jsx)("span",{className:"label",children:"Color"}),(0,n.jsx)("div",{className:"buttonGroup",children:s.colors.map(function(e){return(0,n.jsx)("button",{onClick:function(){return l(e.colorCode)},className:"optionButton "+(r===e.colorCode?"optionButtonSelected":""),children:e.displayName},e.colorCode)})})]}),(0,n.jsxs)("div",{className:"section",children:[(0,n.jsx)("span",{className:"label",children:"Size"}),(0,n.jsx)("div",{className:"buttonGroup",children:s.sizes.map(function(e){return(0,n.jsx)("button",{onClick:function(){return h(e.size)},className:"optionButton "+(m===e.size?"optionButtonSelected":""),children:e.size},e.size)})})]}),c(j,i)]})]})})}function m(e){return(0,n.jsxs)("div",{className:"modalWrapper",children:[(0,n.jsxs)("div",{className:"deviceContainer",children:[(0,n.jsx)("div",{className:"deviceLabel",children:"Mobile view (simulated)"}),(0,n.jsx)("div",{className:"device mobile",children:(0,n.jsx)(u,Object.assign({},e,{deviceType:"mobile"}))})]}),(0,n.jsxs)("div",{className:"deviceContainer",children:[(0,n.jsx)("div",{className:"deviceLabel",children:"Desktop view (simulated)"}),(0,n.jsx)("div",{className:"device desktop",children:(0,n.jsx)(u,Object.assign({},e,{deviceType:"desktop"}))})]})]})}function h(){return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"demoSection",children:[(0,n.jsx)("h3",{children:"Default Behavior"}),(0,n.jsx)(m,{variants:r})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"Injected CTA"}),(0,n.jsx)(m,{variants:r,renderPrimaryCta:function(e){return(0,n.jsx)("button",{className:"primaryButton",disabled:!e.isAvailable,children:e.isAvailable?"Confirm "+e.selectedSize:"Select valid combination"})}})]})]})}const v={},p="Stateless Configurable Modal",x={},j=[{value:"Context",id:"context",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Demo",id:"demo",level:2},{value:"Contract",id:"contract",level:2}];function b(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"stateless-configurable-modal",children:"Stateless Configurable Modal"})}),"\n",(0,n.jsx)(s.h2,{id:"context",children:"Context"}),"\n",(0,n.jsx)(s.p,{children:"Composable modal designed for SKU-driven updates under production constraints."}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h2,{id:"architecture",children:"Architecture"}),"\n",(0,n.jsxs)(s.p,{children:["EditProductModal",(0,n.jsx)(s.br,{}),"\n","\u251c\u2500 prepareModalContext (pure logic)",(0,n.jsx)(s.br,{}),"\n","\u251c\u2500 resolveSecondChild (injection boundary)",(0,n.jsx)(s.br,{}),"\n","\u2514\u2500 DefaultSecondChild"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h2,{id:"demo",children:"Demo"}),"\n",(0,n.jsx)(h,{}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h2,{id:"contract",children:"Contract"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-ts",children:"type RenderPrimaryCta = (context: ModalContext) => React.ReactNode\n"})}),"\n",(0,n.jsx)(s.p,{children:"Separation of orchestration and business behavior via injection boundary."})]})}function f(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(b,{...e})}):b(e)}},8453(e,s,i){i.d(s,{R:()=>o,x:()=>r});var t=i(6540);const n={},a=t.createContext(n);function o(e){const s=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),t.createElement(a.Provider,{value:s},e.children)}}}]);