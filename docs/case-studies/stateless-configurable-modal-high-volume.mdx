import StatelessProductEditModal from '@site/src/components/stateless-product-edit-modal/components/stateless-product-edit-modal';
import { useStatelessProductEditModalDemo } from '@site/src/components/demo-modal/use-edit-product-modal-demo';
import LiveJsxPlayground from '@site/src/components/live-jsx-playground/live-jsx-playground';
import ApiReferenceDrawer from '@site/src/components/docs/api-reference-drawer';
import { highVolumeEditingItem, highVolumeModalMockData } from '@site/src/components/demo-modal/mockData';
import { EditPrimaryButton, EditSecondaryCta } from '@site/src/components/stateless-product-edit-modal/components/partials';

export const componentCode = String.raw`(() => {
  const HighVolumeScenarioDemo = () => {
    const {
      imageUrl,
      colorCode,
      onDismiss,
      handleAddToBagClick,
      handleNavigateProductDetails,
      initialSize,
      productName,
      skuVariants,
    } = useStatelessProductEditModalDemo({
      editingItem: initializationData.editingItem,
      onModalDismiss: () => {},
      mockModalData: skuCombinationsResponse,
    });

    return (
      <StatelessProductEditModal
        mainHeading={productName}
        productName={productName}
        initialImageUrl={imageUrl}
        initialColorCode={colorCode}
        initialSize={initialSize}
        skuVariants={skuVariants}
        onDismiss={onDismiss}
        renderPrimaryCta={({ isCurrentSkuAvailable, currentMatchingSku }) => (
          <EditPrimaryButton
            label="Add to cart"
            disabled={!isCurrentSkuAvailable}
            onClick={() => handleAddToBagClick(currentMatchingSku)}
          />
        )}
        renderSecondaryCta={({ currentMatchingSku }) => (
          <EditSecondaryCta
            label="Go to product overview"
            onClick={() => handleNavigateProductDetails(currentMatchingSku)}
          />
        )}
      />
    );
  };

  return <HighVolumeScenarioDemo />;
})()`;

export const initializationCode = String.raw`({
  editingItem: highVolumeEditingItem
})`;

export const highVolumeScenarioPlaygroundDataCode = `${JSON.stringify(highVolumeModalMockData, null, 2)}`;

# Stateless Configurable Modal – High-Volume Options Demo

<ApiReferenceDrawer />

<small>
  Fake fetch with 12 colors x 25 sizes to stress selector overflow and composition.
</small>

<small className="subtle-attention-text">Resize to see responsive behavior from mobile through desktop.</small>

<LiveJsxPlayground
  title="Live Demo"
  initialCode={componentCode}
  initialInitializationCode={initializationCode}
  initializationVarName="initializationData"
  initializationTitle="Initialization Data"
  initialDataCode={highVolumeScenarioPlaygroundDataCode}
  dataVarName="skuCombinationsResponse"
  dataTitle="SKU Combinations Response"
  scope={{
    StatelessProductEditModal,
    useStatelessProductEditModalDemo,
    EditPrimaryButton,
    EditSecondaryCta,
    highVolumeEditingItem,
    highVolumeModalMockData,
  }}
/>

<a
  href="/cromagnoli/case-studies/stateless-configurable-modal"
  style={{ display: 'inline-block', marginTop: 20 }}
>
  « Back to Stateless Configurable Modal index
</a>
